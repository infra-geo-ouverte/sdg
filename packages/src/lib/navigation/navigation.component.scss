@use 'sass:map';
@use 'sass:math';
@use '../../../core/src/layout';
@use '../../../core/src/theme/colors';
@use '../../../core/src/theme/palettes';

$desktopRowHeight: 72px;
$mobileRowHeight: 40px;

:host {
  display: block; // add default display to be sure that the host resize listener will work
}

.sdg-navigation {
  &-header {
    color: colors.$white;
    background-color: colors.$blue-medium;
    width: 100%;

    &-container {
      padding: 0 16px;

      @include layout.breakpoint-down(mobile) {
        padding: 0 8px;
      }
    }

    &-row {
      display: flex;
      align-items: center;
      min-height: $desktopRowHeight;
      height: $desktopRowHeight;

      &.--two-lines {
        flex-direction: column-reverse;

        > * {
          height: $mobileRowHeight;
        }

        .sdg-navigation-header-actions {
          align-self: flex-end;
        }
      }

      @include layout.breakpoint-down(mobile) {
        height: fit-content;
        min-height: $mobileRowHeight;
      }
    }

    &-actions {
      @include layout.breakpoint-down(mobile) {
        margin-bottom: 0;
      }

      ::ng-deep {
        button {
          margin-left: 24px;

          @include layout.breakpoint-down(mobile) {
            margin-left: 16px;
          }
        }

        .mat-mdc-icon-button {
          margin-left: 4px;
        }
      }
    }

    --tab-inner-spacing: 16px;

    @include layout.breakpoint-down(mobile) {
      --tab-inner-spacing: 8px;
    }

    .mdc-tab {
      --mdc-secondary-navigation-tab-container-height: #{$desktopRowHeight};

      min-width: fit-content;
      padding: 0 var(--tab-inner-spacing);

      &:hover,
      &.--active {
        --mat-tab-header-active-ripple-color: none;
        --mat-tab-header-inactive-ripple-color: none;

        ::ng-deep {
          .mdc-tab-indicator__content {
            width: calc(100% - var(--tab-inner-spacing)) !important;
          }
        }
      }

      @include layout.breakpoint-down(mobile) {
        --mdc-secondary-navigation-tab-container-height: #{$mobileRowHeight};
      }
    }

    ::ng-deep .mat-mdc-tab-links {
      align-items: center;
    }
  }

  &-tab-panel {
    flex-grow: 1;
    align-self: flex-end;
    height: inherit;
    max-width: 100%;

    @include layout.breakpoint-down(mobile) {
      width: 100%;
      flex-grow: unset;
      height: fit-content;
      min-height: $mobileRowHeight;
    }
  }

  &-tab-link,
  &-more-links {
    letter-spacing: 0;
    font-size: 18px;
    line-height: 28px;
    font-weight: 500 !important; // The spec said 600 but for now we like this actual font-weight

    ::ng-deep button {
      font-weight: 500 !important;
    }

    &.--active {
      font-weight: bold;
    }

    &:hover {
      ::ng-deep .mdc-tab-indicator__content--underline {
        height: 3px;
        opacity: 1;
      }
    }
  }

  &-more-links {
    $spacingHalf: calc(var(--tab-inner-spacing) / 2);

    button {
      padding: 0 calc($spacingHalf / 2) 0 $spacingHalf;
      min-width: fit-content !important;
      background-color: colors.$blue-pale !important;
      color: colors.$blue-piv !important;
    }

    mat-icon {
      $size: 18px;
      height: $size;
      width: $size;
      font-size: $size;
    }

    &-container {
      display: flex;
      align-items: center;

      mat-icon {
        margin-left: 4px;

        @include layout.breakpoint-down(mobile) {
          margin-left: 0px;
        }
      }
    }
  }

  &-tab-link,
  &-more-links {
    button {
      --mdc-filled-button-container-height: 40px;
    }

    @include layout.breakpoint-down(mobile) {
      button {
        --mdc-filled-button-container-height: 24px;
      }
      font-size: 13px !important;
      line-height: 16px !important;
    }
  }

  &-content {
    flex: 1 1 auto !important;
  }
}
